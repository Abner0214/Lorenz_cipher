# NSYSU CSE Python Programming Homework

## Introduction

This guide provides an overview and explanation of the Python programming homework PA5 for students of NSYSU's Computer Science and Engineering course. The task involves implementing a simulation of the Lorenz cipher machine, known for its use in secure communications during World War II. This Python implementation will help you understand the workings of early computational encryption techniques and practice Python skills including iterators, comprehensions, and lambda functions.

### The Lorenz Cipher Machine

The Lorenz cipher machine uses a series of rotating wheels to generate a pseudo-random stream of bits, which are then XOR-ed with the plaintext to produce the ciphertext. The machine comprises 12 wheels divided into two sets: the `psi` wheels and the `chi` wheels, generating the psi and chi values respectively. These values are XOR-ed to create the encryption/decryption key.

## Implementation Details

- **Start and Wheel Sizes**: A global variable `start` is used to control the reset of wheels, and `szs` holds the sizes of the 12 Lorenz wheels.
- **Function `lorenz()`**: Generates a 5-bit integer key by simulating the Lorenz machine. It initializes or resets the wheels based on the `start` variable.
- **Encoding and Decoding**: The `enc()` function encodes characters to integers based on a specified scheme, and `dec()` performs the reverse operation.

### Sample Code Analysis

- **Wheel Initialization**: Wheels are initialized with random bits using the `cycle` and `choice` functions, allowing them to rotate endlessly.
- **Key Generation**: The `reduce` function, along with a lambda expression, concatenates bits from the psi and chi wheels to generate integer values. The key is the XOR of these values.
- **Reset Mechanism**: Setting `start` to True and yielding `None` resets the wheels, allowing for decryption with the same initial configuration.

## Task

1. **Complete the Lorenz Function**: Fill in the missing parts of the `lorenz()` function to correctly simulate the Lorenz machine.
2. **Implement Encoding and Decoding**: Ensure the `enc()` and `dec()` functions correctly convert between characters and their encoded integers.
3. **Encryption and Decryption**: Use the key stream generated by `lorenz()` to encrypt and decrypt a given text. Ensure illegal characters are handled appropriately.

### Encryption/Decryption Process

1. **Read the Text**: Read the input text from a file or string.
2. **Encrypt**: For each character in the text, encode it to an integer, XOR it with a key integer from `lorenz()`, and decode the result to a character.
3. **Decrypt**: Reset the Lorenz machine, and repeat the encryption process with the ciphertext to retrieve the original text.

## Conclusion

This homework is designed to enhance your understanding of encryption mechanisms and improve your Python programming skills. Pay attention to how iterators, list comprehensions, lambda functions, and the XOR operation are used in the context of encryption. Happy coding!
